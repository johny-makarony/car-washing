"use strict";(self.webpackChunkcar_washing=self.webpackChunkcar_washing||[]).push([[296],{1296:function(e,n,t){t.r(n),t.d(n,{default:function(){return H}});var r,s,i,a,c,l,u,d=t(1413),o=t(9439),h=t(2791),x=t(9434),m=t(7689),j=t(5705),b=t(822),f=t(9256),v=t(3433),_=t(3351),p=t(9524),Z=t(168),N=t(6088),y=N.Z.li(r||(r=(0,Z.Z)(["\n  display: flex;\n  justify-content: space-between;\n"]))),C=N.Z.div(s||(s=(0,Z.Z)(["\n  display: flex;\n"]))),g=N.Z.p(i||(i=(0,Z.Z)([""]))),S=N.Z.form(a||(a=(0,Z.Z)(["\n  display: flex;\n  gap: 8px;\n"]))),k=N.Z.button(c||(c=(0,Z.Z)(["\n  background-color: transparent;\n  border: none;\n  margin-left: 8px;\n  color: red;\n"]))),w=N.Z.input(l||(l=(0,Z.Z)(["\n  width: 50px;\n"]))),P=N.Z.button(u||(u=(0,Z.Z)([""]))),E=t(9126),M=t(184),T=function(e){var n=e.service,t=(0,x.v9)(_.xC),r=(0,x.I0)(),s=(0,j.TA)({initialValues:{amount:n.amount||"1"},onSubmit:function(e){var s=t.services.filter((function(e){return e._id!==n._id})),i={services:[].concat((0,v.Z)(s),[(0,d.Z)((0,d.Z)({},n),e)])};r((0,p.R5)({number:t.orderNumber,data:i}))}}),i=n.amount?n.amount:1;return(0,M.jsxs)(y,{children:[(0,M.jsx)(g,{children:n.name}),"\u0422\u0430\u043a"===n.pricePerMeter&&(0,M.jsxs)(S,{onSubmit:s.handleSubmit,children:[(0,M.jsxs)("label",{children:[(0,M.jsx)(w,{required:!0,id:"amount",name:"amount",value:s.values.amount,onChange:s.handleChange,type:"number",min:"1"})," ","\u043c\xb2"]}),(0,M.jsx)(P,{type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]}),(0,M.jsxs)(C,{children:[(0,M.jsx)(g,{children:"".concat(n.price*i," \u0433\u0440\u043d")}),(0,M.jsx)(k,{type:"button",onClick:function(){return function(e){var n={services:t.services.filter((function(n){return n._id!==e}))};r((0,p.R5)({number:t.orderNumber,data:n}))}(n._id)},children:(0,M.jsx)(E.VgY,{})})]})]})},I=t(7520),D=t(5365),R=t(1214),V=function(e){var n=(0,x.v9)(R.f),t=(0,x.v9)(_.xC),r=(0,x.I0)();(0,h.useEffect)((function(){r((0,D.U)())}),[r]);var s=function(){e.handleExitModal(!0)},i=(0,j.TA)({initialValues:{service:""},onSubmit:function(e){!function(e){var n=e.service,s={services:[].concat((0,v.Z)(t.services),[n])};r((0,p.R5)({number:t.orderNumber,data:s}))}(e),s()}});return(0,M.jsx)(I.YM,{onClick:function(e){e.target===e.currentTarget&&s()},children:(0,M.jsxs)(I.u_,{children:[(0,M.jsx)(I.PZ,{type:"button",onClick:s,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),(0,M.jsxs)(I.l0,{onSubmit:i.handleSubmit,children:[(0,M.jsx)(I.Dx,{children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u043f\u043e\u0441\u043b\u0443\u0433\u0443"}),(0,M.jsx)(b.Z,{required:!0,id:"service",name:"service",value:i.values.service,onChange:i.handleChange,variant:"standard",style:{width:"100%"},children:n.map((function(e){return(0,M.jsx)(f.Z,{value:e,children:"".concat(e.category,". ").concat(e.name,". ").concat(e.price,"\u0433\u0440\u043d")},e._id)}))}),(0,M.jsx)("button",{type:"submit",className:"btn",children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})})},q=function(e){var n=e.handleExitModal,t=e.orderNumber,r=(0,x.I0)(),s=(0,j.TA)({initialValues:{status:""},onSubmit:function(e){var s=(0,d.Z)({},e);r((0,p.R5)({number:t,data:s})),n(!0)}});return(0,M.jsx)(I.YM,{onClick:function(e){e.target===e.currentTarget&&n(!0)},children:(0,M.jsxs)(I.u_,{children:[(0,M.jsx)(I.PZ,{type:"button",onClick:n,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),(0,M.jsxs)(I.l0,{onSubmit:s.handleSubmit,children:[(0,M.jsx)(I.Dx,{children:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441"}),(0,M.jsxs)(b.Z,{required:!0,id:"status",name:"status",value:s.values.status,onChange:s.handleChange,variant:"standard",style:{width:"100%"},children:[(0,M.jsx)(f.Z,{value:"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456",children:" \u0412 \u0440\u043e\u0431\u043e\u0442\u0456 "}),(0,M.jsx)(f.Z,{value:"\u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0435",children:" \u0412\u0438\u043a\u043e\u043d\u0430\u043d\u0435 "}),(0,M.jsx)(f.Z,{value:"\u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u0435",children:" \u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u0435 "})]}),(0,M.jsx)("button",{type:"submit",className:"btn",children:"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"})]})]})})},A=t(1599),O=function(e){var n=(0,x.v9)(_.xC),t=(0,x.I0)(),r=function(){e.handleExitModal(!0)},s=(0,j.TA)({initialValues:{discountPercent:""},onSubmit:function(e){t((0,p.R5)({number:n.orderNumber,data:(0,d.Z)({},e)})),r()}});return(0,M.jsx)(I.YM,{onClick:function(e){e.target===e.currentTarget&&r()},children:(0,M.jsxs)(I.u_,{children:[(0,M.jsx)(I.PZ,{type:"button",onClick:r,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),(0,M.jsxs)(I.l0,{onSubmit:s.handleSubmit,children:[(0,M.jsx)(I.Dx,{children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u043d\u0438\u0436\u043a\u0443"}),(0,M.jsx)(A.Z,{required:!0,type:"text",id:"discountPercent",name:"discountPercent",label:"\u0412\u0456\u0434\u0441\u043e\u0442\u043e\u043a \u0437\u043d\u0438\u0436\u043a\u0438",value:s.values.discountPercent,onChange:s.handleChange,variant:"standard",className:"field"}),(0,M.jsx)("button",{type:"submit",className:"btn",children:"\u0414\u043e\u0434\u0430\u0442\u0438"})]})]})})},Y=t(3184),L=t(2023),G=function(){var e=(0,h.useState)(!1),n=(0,o.Z)(e,2),t=n[0],r=n[1],s=(0,h.useState)(!1),i=(0,o.Z)(s,2),a=i[0],c=i[1],l=(0,h.useState)(!1),u=(0,o.Z)(l,2),v=u[0],Z=u[1],N=(0,h.useState)(!1),y=(0,o.Z)(N,2),C=y[0],g=y[1],S=(0,x.v9)(_.xC),k=(0,x.v9)(L.r),w=(0,x.v9)(_.yZ),P=(0,x.v9)(L.H),E=(0,m.UO)().id,I=(0,x.I0)();(0,h.useEffect)((function(){I((0,Y.X)()),I((0,p.nc)(E))}),[I,E]);var D=function(){c(!1),Z(!1),g(!1)},R=(0,j.TA)({initialValues:{washer:""},onSubmit:function(e){var n=(0,d.Z)({},e);I((0,p.R5)({number:E,data:n})),r(!1)}});return w||P?(0,M.jsx)("div",{children:"Loading..."}):(0,M.jsxs)("div",{className:"order",children:[(0,M.jsxs)("div",{className:"info__container",children:[(0,M.jsxs)("div",{className:"status__container",children:[(0,M.jsx)("h2",{children:"\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f: ".concat(S.orderNumber)}),(0,M.jsxs)("form",{onSubmit:R.handleSubmit,style:{display:"flex",alignItems:"center",columnGap:"8px"},children:[(0,M.jsxs)("label",{style:{display:"flex",alignItems:"center",columnGap:"8px"},children:["\u041f\u0440\u0430\u0446\u0456\u0432\u043d\u0438\u043a: ",!t&&S.washer,t&&(0,M.jsx)(b.Z,{required:!0,id:"washer",name:"washer",value:R.values.washer,onChange:R.handleChange,disabled:!t,variant:"standard",children:k&&k.map((function(e){return(0,M.jsx)(f.Z,{value:e.name,children:e.name},e._id)}))})]}),(0,M.jsx)("button",{type:"button",onClick:function(){return r(!t)},children:t?"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438":"\u0417\u043c\u0456\u043d\u0438\u0442\u0438"}),(0,M.jsx)("button",{type:"submit",disabled:!t,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]}),(0,M.jsx)("button",{type:"button",onClick:function(){return Z(!0)},className:(S.status,"\u041d\u043e\u0432\u0435"===S.status?"status__btn status__btn--new":"\u0412 \u0440\u043e\u0431\u043e\u0442\u0456"===S.status?"status__btn status__btn--in-process":"\u0421\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u0435"===S.status?"status__btn status__btn--canceled":"status__btn status__btn--completed"),children:S.status}),v&&(0,M.jsx)(q,{handleExitModal:D,orderNumber:S.orderNumber})]}),S.urgently&&(0,M.jsx)("b",{children:"\u0422\u0435\u0440\u043c\u0456\u043d\u043e\u0432\u043e!"}),S.clientComment&&(0,M.jsx)("p",{children:"\u041a\u043e\u043c\u0435\u043d\u0442\u0430\u0440 \u043a\u043b\u0456\u0454\u043d\u0442\u0430: ".concat(S.clientComment)}),(0,M.jsx)("p",{children:"\u041a\u043b\u0456\u0454\u043d\u0442: ".concat(S.clientName)}),(0,M.jsx)("p",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0438: ".concat(S.clientPhone)}),(0,M.jsx)("p",{children:"\u041e\u0431'\u0454\u043a\u0442 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f: ".concat(S.serviceObject)}),(0,M.jsx)("p",{children:"\u0414\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 \u043f\u043e\u0441\u043b\u0443\u0433\u0438: ".concat(S.orderDate)}),S.orderExecutionDate&&(0,M.jsx)("p",{children:"\u0414\u0430\u0442\u0430 \u0442\u0430 \u0447\u0430\u0441 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u044f: ".concat(S.orderExecutionDate)})]}),(0,M.jsxs)("div",{className:"order__block",children:[(0,M.jsx)("h3",{className:"order__title",children:"\u041f\u043e\u0441\u043b\u0443\u0433\u0438:"}),(0,M.jsx)("ul",{className:"list order__list",children:S.services&&S.services.map((function(e){return(0,M.jsx)(T,{service:e},e._id)}))}),(0,M.jsx)("button",{type:"button",onClick:function(){return c(!0)},className:"order__btn--add",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u043f\u043e\u0441\u043b\u0443\u0433\u0443"}),a&&(0,M.jsx)(V,{handleExitModal:D})]}),(0,M.jsxs)("div",{className:"order__block",children:[(0,M.jsx)("h3",{className:"order__title",children:"\u0420\u043e\u0437\u0440\u0430\u0445\u0443\u043d\u043e\u043a:"}),(0,M.jsxs)("ul",{className:"list order__list",children:[(0,M.jsxs)("li",{className:"order__list-item",children:[(0,M.jsx)("p",{className:"order__calculation",children:"\u0417\u0430\u0433\u0430\u043b\u044c\u043d\u0430 \u0432\u0430\u0440\u0442\u0456\u0441\u0442\u044c:"}),(0,M.jsx)("p",{children:"".concat(S.totalCostOrder," \u0433\u0440\u043d")})]}),(0,M.jsxs)("li",{className:"order__list-item",children:[(0,M.jsx)("p",{className:"order__calculation",children:"\u0412\u0430\u0440\u0442\u0456\u0441\u0442\u044c \u0437\u0456 \u0437\u043d\u0438\u0436\u043a\u043e\u044e:"}),(0,M.jsx)("p",{children:"".concat(S.discountedCostOrder," \u0433\u0440\u043d")})]}),(0,M.jsxs)("li",{className:"order__list-item",children:[(0,M.jsx)("p",{className:"order__calculation",children:"\u0412\u0438\u043f\u043b\u0430\u0442\u0430 \u043f\u0440\u0430\u0446\u0456\u0432\u043d\u0438\u043a\u0443:"}),(0,M.jsx)("p",{children:"".concat(S.washerPayment," \u0433\u0440\u043d")})]}),(0,M.jsxs)("li",{className:"order__list-item",children:[(0,M.jsx)("p",{className:"order__calculation",children:"\u0412\u0438\u043f\u043b\u0430\u0442\u0430 \u0430\u0434\u043c\u0456\u043d\u0456\u0441\u0442\u0440\u0430\u0442\u043e\u0440\u0443:"}),(0,M.jsx)("p",{children:"".concat(S.administratorPayment," \u0433\u0440\u043d")})]}),(0,M.jsxs)("li",{className:"order__list-item",children:[(0,M.jsx)("p",{className:"order__calculation",children:"\u0417\u0430\u043b\u0438\u0448\u043e\u043a:"}),(0,M.jsx)("p",{children:"".concat(S.revenue," \u0433\u0440\u043d")})]})]}),(0,M.jsx)("button",{type:"button",onClick:function(){return g(!0)},className:"order__btn--add",children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0437\u043d\u0438\u0436\u043a\u0443"}),C&&(0,M.jsx)(O,{handleExitModal:D})]})]})},H=function(){return(0,M.jsx)(G,{})}},2023:function(e,n,t){t.d(n,{H:function(){return s},r:function(){return r}});var r=function(e){return e.employees.items},s=function(e){return e.employees.isLoading}},3351:function(e,n,t){t.d(n,{ny:function(){return r},xC:function(){return s},yZ:function(){return i}});var r=function(e){return e.orders.items},s=function(e){return e.orders.orderByNumber},i=function(e){return e.orders.isLoading}},1214:function(e,n,t){t.d(n,{f:function(){return r}});var r=function(e){return e.services.items}}}]);
//# sourceMappingURL=296.c356490b.chunk.js.map